<!-- GUARANTEED VISIBLE NAVBAR -->
<nav class="bg-scent-blue py-2.5 sm:py-3 md:py-4 sticky top-0 z-50">
    <div class="container mx-auto px-3 sm:px-4">
        <div class="flex items-center justify-between w-full">
            <!-- Logo with Icon -->
            <a href="{% url 'home' %}" class="flex items-center group flex-shrink-0">
                <div class="bg-amber-500 p-1 sm:p-1.5 md:p-2 rounded-md mr-1.5 sm:mr-2 md:mr-3 group-hover:bg-amber-400 transition-colors">
                    <i class="fas fa-spray-can text-scent-blue text-xs sm:text-sm md:text-lg"></i>
                </div>
                <span class="font-logo font-bold text-xl sm:text-2xl md:text-3xl lg:text-4xl text-white truncate" style="text-shadow: 1px 1px 2px rgba(0,0,0,0.3);">
                    Sceani<span class="text-amber-500">Collections</span>
                </span>
            </a>
            <!-- Mobile Menu & Cart Buttons -->
            <div class="flex items-center gap-1 sm:gap-3 md:hidden">
                <!-- Mobile Cart Icon - Hidden for admins -->
                {% if not user.is_admin_user %}
                <a href="{% url 'cart:detail' %}" class="relative p-2.5 text-gray-300 hover:text-white transition-colors active:scale-95">
                    <i class="fas fa-shopping-cart text-lg"></i>
                    {% if cart_total_items and cart_total_items > 0 %}
                    <span class="absolute top-0.5 right-0.5 bg-amber-500 text-scent-blue text-[10px] font-bold rounded-full h-4 w-4 flex items-center justify-center">
                        {{ cart_total_items }}
                    </span>
                    {% endif %}
                </a>
                {% endif %}
                <!-- Mobile Menu Button -->
                <button class="text-white hover:text-amber-500 transition-colors p-2.5 active:scale-95" id="mobileMenuBtn" aria-label="Toggle menu">
                    <i class="fas fa-bars text-xl"></i>
                </button>
            </div>
            <!-- Desktop Navigation Links (hidden on mobile) -->
            <div class="hidden md:flex md:items-center md:space-x-1 ml-auto">
                <a href="{% url 'home' %}"
                    class="nav-link text-gray-300 hover:text-white font-medium text-sm px-4 py-2 rounded-md hover:bg-white/10 transition-all duration-200 flex items-center">
                    <i class="fas fa-home mr-2 text-amber-500"></i> Home
                </a>
                <a href="{% url 'store:product_list' %}"
                    class="nav-link text-gray-300 hover:text-white font-medium text-sm px-4 py-2 rounded-md hover:bg-white/10 transition-all duration-200 flex items-center">
                    <i class="fas fa-store mr-2 text-amber-500"></i> Shop
                </a>
                {% if user.is_authenticated %}
                {% if user.is_admin_user %}
                <a href="{% url 'dashboard:admin_dashboard' %}"
                    class="nav-link text-gray-300 hover:text-white font-medium text-sm px-4 py-2 rounded-md hover:bg-white/10 transition-all duration-200 flex items-center">
                    <i class="fas fa-cog mr-2 text-amber-500"></i> Admin
                </a>
                {% elif user.is_customer_user %}
                <a href="{% url 'dashboard:customer_dashboard' %}"
                    class="nav-link text-gray-300 hover:text-white font-medium text-sm px-4 py-2 rounded-md hover:bg-white/10 transition-all duration-200 flex items-center">
                    <i class="fas fa-tachometer-alt mr-2 text-amber-500"></i> Dashboard
                </a>
                <a href="{% url 'dashboard:customer_orders' %}"
                    class="nav-link text-gray-300 hover:text-white font-medium text-sm px-4 py-2 rounded-md hover:bg-white/10 transition-all duration-200 flex items-center">
                    <i class="fas fa-shopping-bag mr-2 text-amber-500"></i> Orders
                </a>
                <a href="{% url 'dashboard:customer_wishlist' %}"
                    class="nav-link text-gray-300 hover:text-white font-medium text-sm px-4 py-2 rounded-md hover:bg-white/10 transition-all duration-200 flex items-center">
                    <i class="fas fa-heart mr-2 text-amber-500"></i> Wishlist
                </a>
                <a href="{% url 'accounts:profile' %}"
                    class="nav-link text-gray-300 hover:text-white font-medium text-sm px-4 py-2 rounded-md hover:bg-white/10 transition-all duration-200 flex items-center">
                    <i class="fas fa-user mr-2 text-amber-500"></i> Profile
                </a>
                {% endif %}
                <!-- My Account dropdown for account actions -->
                <div class="relative group">
                    <a href="#"
                        class="nav-link text-gray-300 hover:text-white font-medium text-sm px-4 py-2 rounded-md hover:bg-white/10 transition-all duration-200 flex items-center">
                        <i class="fas fa-user-circle text-lg mr-2 text-amber-500"></i>
                        <span class="hidden md:inline">{{ user.first_name|default:"Account" }}</span>
                        <span class="md:hidden">Account</span>
                        <i class="fas fa-chevron-down ml-1 text-xs hidden md:inline"></i>
                    </a>
                    <div class="absolute right-0 mt-2 w-56 bg-white rounded-lg shadow-xl hidden group-hover:block z-50 border border-gray-100 overflow-hidden">
                        <div class="px-4 py-3 bg-gray-50 border-b border-gray-100">
                            <p class="text-sm font-semibold text-gray-900">{{ user.get_full_name|default:user.email }}</p>
                            <p class="text-xs text-gray-500 mt-0.5">{{ user.email }}</p>
                        </div>
                        <div>
                            <a href="{% url 'accounts:logout' %}"
                                class="flex items-center px-4 py-3 text-gray-700 hover:bg-gray-50 transition-colors text-sm">
                                <i class="fas fa-sign-out-alt mr-3 text-gray-400"></i> Sign Out
                            </a>
                        </div>
                    </div>
                </div>
                {% else %}
                <a href="{% url 'accounts:login' %}"
                    class="nav-link text-gray-300 hover:text-white font-medium text-sm px-4 py-2 rounded-md hover:bg-white/10 transition-all duration-200 flex items-center">
                    <i class="fas fa-sign-in-alt mr-2 text-amber-500"></i> Login
                </a>
                <a href="{% url 'accounts:register' %}"
                    class="bg-amber-500 text-scent-blue font-semibold text-sm px-4 py-2 rounded-md hover:bg-amber-400 transition-all duration-200 flex items-center ml-2">
                    <i class="fas fa-user-plus mr-2"></i> Register
                </a>
                {% endif %}
                
                <!-- Cart Icon - Hidden for admins -->
                {% if not user.is_admin_user %}
                <a href="{% url 'cart:detail' %}" 
                    class="relative ml-4 p-2 text-gray-300 hover:text-white transition-colors group">
                    <i class="fas fa-shopping-cart text-xl group-hover:text-amber-500 transition-colors"></i>
                    {% if cart_total_items and cart_total_items > 0 %}
                    <span class="absolute -top-1 -right-1 bg-amber-500 text-scent-blue text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center animate-pulse">
                        {{ cart_total_items }}
                    </span>
                    {% endif %}
                </a>
                {% endif %}
            </div>
        </div>
        <!-- Mobile Menu (Hidden by default) -->
        <div class="md:hidden mt-3 hidden" id="mobileMenu">
            <div class="flex flex-col space-y-0.5 bg-gray-900 rounded-lg p-3 max-h-[70vh] overflow-y-auto">
                <a href="{% url 'home' %}"
                    class="flex items-center px-4 py-3.5 rounded-md text-gray-300 hover:bg-white/10 hover:text-white transition text-base active:bg-white/20">
                    <i class="fas fa-home mr-3 text-amber-500 w-5"></i> Home
                </a>
                <a href="{% url 'store:product_list' %}"
                    class="flex items-center px-4 py-3.5 rounded-md text-gray-300 hover:bg-white/10 hover:text-white transition text-base active:bg-white/20">
                    <i class="fas fa-store mr-3 text-amber-500 w-5"></i> Shop
                </a>
                <a href="{% url 'store:category_list' %}"
                    class="flex items-center px-4 py-3.5 rounded-md text-gray-300 hover:bg-white/10 hover:text-white transition text-base active:bg-white/20">
                    <i class="fas fa-tags mr-3 text-amber-500 w-5"></i> Categories
                </a>
                {% if not user.is_admin_user %}
                <a href="{% url 'cart:detail' %}"
                    class="flex items-center px-4 py-3.5 rounded-md text-gray-300 hover:bg-white/10 hover:text-white transition text-base relative active:bg-white/20">
                    <i class="fas fa-shopping-bag mr-3 text-amber-500 w-5"></i> Cart
                    {% if cart_total_items and cart_total_items > 0 %}<span
                        class="ml-auto bg-amber-500 text-scent-blue text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center">{{
                        cart_total_items }}</span>{% endif %}
                </a>
                {% endif %}
                {% if user.is_authenticated %}
                {% if user.is_admin_user %}
                <a href="{% url 'dashboard:admin_dashboard' %}"
                    class="flex items-center px-4 py-3.5 rounded-md text-gray-300 hover:bg-white/10 hover:text-white transition text-base active:bg-white/20">
                    <i class="fas fa-cog mr-3 text-amber-500 w-5"></i> Admin Dashboard
                </a>
                {% elif user.is_customer_user %}
                <a href="{% url 'dashboard:customer_dashboard' %}"
                    class="flex items-center px-4 py-3.5 rounded-md text-gray-300 hover:bg-white/10 hover:text-white transition text-base active:bg-white/20">
                    <i class="fas fa-tachometer-alt mr-3 text-amber-500 w-5"></i> Dashboard
                </a>
                <a href="{% url 'dashboard:customer_orders' %}"
                    class="flex items-center px-4 py-3.5 rounded-md text-gray-300 hover:bg-white/10 hover:text-white transition text-base active:bg-white/20">
                    <i class="fas fa-shopping-bag mr-3 text-amber-500 w-5"></i> Orders
                </a>
                <a href="{% url 'dashboard:customer_wishlist' %}"
                    class="flex items-center px-4 py-3.5 rounded-md text-gray-300 hover:bg-white/10 hover:text-white transition text-base active:bg-white/20">
                    <i class="fas fa-heart mr-3 text-amber-500 w-5"></i> Wishlist
                </a>
                <a href="{% url 'accounts:profile' %}"
                    class="flex items-center px-4 py-3.5 rounded-md text-gray-300 hover:bg-white/10 hover:text-white transition text-base active:bg-white/20">
                    <i class="fas fa-user mr-3 text-amber-500 w-5"></i> Profile
                </a>
                {% endif %}
                <a href="{% url 'accounts:logout' %}"
                    class="flex items-center px-4 py-3.5 rounded-md text-gray-400 hover:bg-white/10 hover:text-white transition text-base mt-2 border-t border-gray-800 pt-4 active:bg-white/20">
                    <i class="fas fa-sign-out-alt mr-3 w-5"></i> Sign Out
                </a>
                {% else %}
                <div class="mt-2 pt-3 border-t border-gray-800 space-y-1">
                    <a href="{% url 'accounts:login' %}"
                        class="flex items-center px-4 py-3.5 rounded-md text-gray-300 hover:bg-white/10 hover:text-white transition text-base active:bg-white/20">
                        <i class="fas fa-sign-in-alt mr-3 text-amber-500 w-5"></i> Login
                    </a>
                    <a href="{% url 'accounts:register' %}"
                        class="flex items-center justify-center px-4 py-3.5 rounded-md bg-amber-500 text-scent-blue font-semibold hover:bg-amber-400 transition text-base active:bg-amber-300">
                        <i class="fas fa-user-plus mr-2"></i> Register
                    </a>
                </div>
                {% endif %}
            </div>
        </div>
    </div>
</nav>

<!-- Announcement Bar -->
<div class="bg-gray-900 text-gray-300 border-t border-gray-800">
    <div class="container mx-auto px-3 sm:px-4 py-2 sm:py-2.5">
        <div class="flex flex-col sm:flex-row justify-between items-center text-center sm:text-left text-[11px] sm:text-xs space-y-1 sm:space-y-0">
            <div class="flex items-center">
                <i class="fas fa-gift mr-1.5 sm:mr-2 text-amber-500"></i>
                <span>Free Gift Wrapping on All Orders</span>
            </div>
            <div class="flex items-center space-x-3 sm:space-x-4">
                <span class="flex items-center"><i class="fas fa-shipping-fast mr-1.5 sm:mr-2 text-amber-500"></i>Free Shipping</span>
                <span class="hidden sm:inline text-gray-600">|</span>
                <span class="flex items-center"><i class="fas fa-phone mr-1.5 sm:mr-2 text-amber-500"></i>810 123 4567</span>
            </div>
        </div>
    </div>
</div>

<script>
    // Mobile menu toggle
    document.addEventListener('DOMContentLoaded', function () {
        const mobileMenuBtn = document.getElementById('mobileMenuBtn');
        const mobileMenu = document.getElementById('mobileMenu');
        const desktopMenu = document.getElementById('desktopMenu');

        if (mobileMenuBtn && mobileMenu) {
            mobileMenuBtn.addEventListener('click', function () {
                mobileMenu.classList.toggle('hidden');
                // Toggle icon
                const icon = mobileMenuBtn.querySelector('i');
                if (mobileMenu.classList.contains('hidden')) {
                    icon.classList.remove('fa-times');
                    icon.classList.add('fa-bars');
                } else {
                    icon.classList.remove('fa-bars');
                    icon.classList.add('fa-times');
                }
            });
        }
        // Highlight current page
        const currentPath = window.location.pathname;
        document.querySelectorAll('.nav-link').forEach(link => {
            if (link.getAttribute('href') === currentPath) {
                link.classList.add('bg-white/10', 'text-white');
            }
        });
    });
</script>

<style>
    .nav-link {
        position: relative;
    }

    .nav-link::after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 50%;
        width: 0;
        height: 2px;
        background: #f59e0b;
        transition: all 0.3s ease;
        transform: translateX(-50%);
    }

    .nav-link:hover::after {
        width: 60%;
    }
</style>